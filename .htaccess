# Redirect all requests to public folder
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/public/
RewriteRule ^(.*)$ /public/$1 [L,QSA]

# Deny access to sensitive files
<Files ".env">
    Order allow,deny
    Deny from all
</Files>

<Files "composer.json">
    Order allow,deny
    Deny from all
</Files>

<Files "composer.lock">
    Order allow,deny
    Deny from all
</Files>

# Deny access to directories
RedirectMatch 403 ^/\..*$
RedirectMatch 403 ^.*/storage/.*$
RedirectMatch 403 ^.*/bootstrap/cache/.*$